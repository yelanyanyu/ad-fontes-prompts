# Changelog

## [1.2.5] - 2026-01-27

### 新增功能 (Features)
- **列表统计**:
  - 在列表工具栏顶部增加 "Total Words" 统计徽标，实时显示数据库（或本地）中的单词总数，便于快速掌握词库规模。

## [1.2.4] - 2026-01-27

### 新增功能 (Features)
- **服务端分页与查询**:
  - `GET /api/words` 新增 `page/limit/search/sort` 参数支持，列表页可按需加载数据库记录，避免一次性拉取全量数据导致的卡顿。
  - 新增 `GET /api/words/:id` 获取单条词条详情（含 `original_yaml`），用于预览与编辑的按需加载。

### 优化 (Improvements)
- **列表性能**:
  - 列表页从“前端全量拉取后本地分页”升级为“服务端分页”，显著降低内存占用与首屏等待时间。
  - 搜索/排序变更采用轻量防抖触发请求，减少频繁请求带来的抖动。
- **预览/编辑按需加载**:
  - 列表数据默认只加载摘要字段；进入预览/编辑时再拉取 `original_yaml`，减少大字段在列表态的传输与渲染压力。

## [1.2.3] - 2026-01-26

### 新增功能 (Features)
- **预览集成 (Preview Integration)**:
  - **双模式预览**: 完美移植 `yml2html` 工具，支持“精美卡片”和“Markdown 笔记”两种预览模式。
  - **深度解析**: 预览模式支持词源分析、历史典故、视觉画面等核心字段的完整渲染。
  - **交互增强**: 列表卡片新增“更多”菜单，支持快速进入预览页。
- **编辑器增强**:
  - **实时校验**: 集成 `js-yaml`，在编辑 YAML 时提供实时的格式校验与错误提示 (Valid/Error)。
- **布局重构**:
  - **侧边栏设计**: 将顶部导航重构为可收起的左侧侧边栏 (Sidebar)，优化屏幕空间利用率。
  - **头部优化**: 统一 Header 区域，固定展示 Logo 与应用标题。

### 优化 (Improvements)
- **UI/UX**:
  - **搜索栏迁移**: 将搜索框从顶部 Header 移至列表工具栏，使筛选操作更贴近数据列表。
  - **侧边栏交互**: 收起侧边栏时自动居中图标，展开时恢复左对齐，提供更精致的视觉体验。
  - **Markdown 样式**: 引入 `github-markdown-css`，确保预览模式下的 Markdown 渲染（列表、引用、代码块）样式规范美观。

## [1.2.2] - 2026-01-26

### 重构 (Refactor)
- **前端架构解耦**: 将原本庞大的 `index.html` 拆分为模块化的 JavaScript (ES Modules) 和独立的 CSS 文件，提升代码可维护性。
  - **模块化**: 引入 `main.js` 作为入口，拆分出 `list.js`, `sync.js`, `editor.js`, `settings.js` 等独立模块。
  - **状态管理**: 创建 `state.js` 集中管理 `localRecords`、分页信息和数据库连接状态，彻底解决全局变量污染导致的 `ReferenceError`。
  - **样式分离**: 提取内联样式至 `public/css/style.css`。

### 新增功能 (Features)
- **高级列表控制**:
  - **模糊搜索**: 支持单词的部分匹配搜索（不区分大小写）。
  - **多重排序**: 新增排序下拉菜单，支持 A-Z、Z-A、最新创建、最旧创建四种排序方式。
  - **客户端分页**: 新增分页组件，支持自定义每页显示数量 (Page Size)。
- **配置与限制**:
  - **本地存储上限**: 在设置中可配置 "Max Local Items" (暂存区最大数量)。
  - **存储保护**: 当本地暂存区达到上限时，系统现在会阻止新记录的添加并报错，而不是静默覆盖旧数据。
- **导航优化**: Header 新增 Words / Phrase 页面切换导航。

### 修复 (Fixes)
- 修复了同步按钮点击无效的问题 (`localRecords is not defined`)。
- 修复了 `Max Local Items` 设置为 1 时，添加第二个词会导致第一个词被静默覆盖的问题。
